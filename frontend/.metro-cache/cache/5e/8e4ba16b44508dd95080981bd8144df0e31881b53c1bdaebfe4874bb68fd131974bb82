{"dependencies":[],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.loadWorkers = loadWorkers;\n  exports.saveWorkers = saveWorkers;\n  exports.updateAttendance = updateAttendance;\n  exports.isExpired = isExpired;\n  // localStorage helper functions for worker data\n  // Note: Using localStorage for web compatibility\n\n  const WORKERS_KEY = 'worksite_workers';\n  function loadWorkers() {\n    try {\n      const data = localStorage.getItem(WORKERS_KEY);\n      return data ? JSON.parse(data) : {};\n    } catch (error) {\n      console.error('Error loading workers:', error);\n      return {};\n    }\n  }\n  function saveWorkers(workers) {\n    try {\n      localStorage.setItem(WORKERS_KEY, JSON.stringify(workers));\n      return true;\n    } catch (error) {\n      console.error('Error saving workers:', error);\n      return false;\n    }\n  }\n  function updateAttendance(workerId, dateISO, status) {\n    const workers = loadWorkers();\n    if (!workers[workerId]) {\n      workers[workerId] = {\n        attendance: []\n      };\n    }\n    if (!workers[workerId].attendance) {\n      workers[workerId].attendance = [];\n    }\n\n    // Find existing or create new\n    const existingIndex = workers[workerId].attendance.findIndex(a => a.date === dateISO);\n    const record = {\n      date: dateISO,\n      status: status,\n      markedAt: Date.now()\n    };\n    if (existingIndex >= 0) {\n      workers[workerId].attendance[existingIndex] = record;\n    } else {\n      workers[workerId].attendance.push(record);\n    }\n    saveWorkers(workers);\n    return workers[workerId];\n  }\n  function isExpired(markedAt) {\n    if (!markedAt) return false;\n    const now = Date.now();\n    const elapsed = now - markedAt;\n    const twentyFourHours = 86400000;\n    return elapsed > twentyFourHours;\n  }\n});","lineCount":66,"map":[[7,2,6,0,"exports"],[7,9,6,0],[7,10,6,0,"loadWorkers"],[7,21,6,0],[7,24,6,0,"loadWorkers"],[7,35,6,0],[8,2,16,0,"exports"],[8,9,16,0],[8,10,16,0,"saveWorkers"],[8,21,16,0],[8,24,16,0,"saveWorkers"],[8,35,16,0],[9,2,26,0,"exports"],[9,9,26,0],[9,10,26,0,"updateAttendance"],[9,26,26,0],[9,29,26,0,"updateAttendance"],[9,45,26,0],[10,2,56,0,"exports"],[10,9,56,0],[10,10,56,0,"isExpired"],[10,19,56,0],[10,22,56,0,"isExpired"],[10,31,56,0],[11,2,1,0],[12,2,2,0],[14,2,4,0],[14,8,4,6,"WORKERS_KEY"],[14,19,4,17],[14,22,4,20],[14,40,4,38],[15,2,6,7],[15,11,6,16,"loadWorkers"],[15,22,6,27,"loadWorkers"],[15,23,6,27],[15,25,6,30],[16,4,7,2],[16,8,7,6],[17,6,8,4],[17,12,8,10,"data"],[17,16,8,14],[17,19,8,17,"localStorage"],[17,31,8,29],[17,32,8,30,"getItem"],[17,39,8,37],[17,40,8,38,"WORKERS_KEY"],[17,51,8,49],[17,52,8,50],[18,6,9,4],[18,13,9,11,"data"],[18,17,9,15],[18,20,9,18,"JSON"],[18,24,9,22],[18,25,9,23,"parse"],[18,30,9,28],[18,31,9,29,"data"],[18,35,9,33],[18,36,9,34],[18,39,9,37],[18,40,9,38],[18,41,9,39],[19,4,10,2],[19,5,10,3],[19,6,10,4],[19,13,10,11,"error"],[19,18,10,16],[19,20,10,18],[20,6,11,4,"console"],[20,13,11,11],[20,14,11,12,"error"],[20,19,11,17],[20,20,11,18],[20,44,11,42],[20,46,11,44,"error"],[20,51,11,49],[20,52,11,50],[21,6,12,4],[21,13,12,11],[21,14,12,12],[21,15,12,13],[22,4,13,2],[23,2,14,0],[24,2,16,7],[24,11,16,16,"saveWorkers"],[24,22,16,27,"saveWorkers"],[24,23,16,28,"workers"],[24,30,16,35],[24,32,16,37],[25,4,17,2],[25,8,17,6],[26,6,18,4,"localStorage"],[26,18,18,16],[26,19,18,17,"setItem"],[26,26,18,24],[26,27,18,25,"WORKERS_KEY"],[26,38,18,36],[26,40,18,38,"JSON"],[26,44,18,42],[26,45,18,43,"stringify"],[26,54,18,52],[26,55,18,53,"workers"],[26,62,18,60],[26,63,18,61],[26,64,18,62],[27,6,19,4],[27,13,19,11],[27,17,19,15],[28,4,20,2],[28,5,20,3],[28,6,20,4],[28,13,20,11,"error"],[28,18,20,16],[28,20,20,18],[29,6,21,4,"console"],[29,13,21,11],[29,14,21,12,"error"],[29,19,21,17],[29,20,21,18],[29,43,21,41],[29,45,21,43,"error"],[29,50,21,48],[29,51,21,49],[30,6,22,4],[30,13,22,11],[30,18,22,16],[31,4,23,2],[32,2,24,0],[33,2,26,7],[33,11,26,16,"updateAttendance"],[33,27,26,32,"updateAttendance"],[33,28,26,33,"workerId"],[33,36,26,41],[33,38,26,43,"dateISO"],[33,45,26,50],[33,47,26,52,"status"],[33,53,26,58],[33,55,26,60],[34,4,27,2],[34,10,27,8,"workers"],[34,17,27,15],[34,20,27,18,"loadWorkers"],[34,31,27,29],[34,32,27,30],[34,33,27,31],[35,4,29,2],[35,8,29,6],[35,9,29,7,"workers"],[35,16,29,14],[35,17,29,15,"workerId"],[35,25,29,23],[35,26,29,24],[35,28,29,26],[36,6,30,4,"workers"],[36,13,30,11],[36,14,30,12,"workerId"],[36,22,30,20],[36,23,30,21],[36,26,30,24],[37,8,30,26,"attendance"],[37,18,30,36],[37,20,30,38],[38,6,30,41],[38,7,30,42],[39,4,31,2],[40,4,33,2],[40,8,33,6],[40,9,33,7,"workers"],[40,16,33,14],[40,17,33,15,"workerId"],[40,25,33,23],[40,26,33,24],[40,27,33,25,"attendance"],[40,37,33,35],[40,39,33,37],[41,6,34,4,"workers"],[41,13,34,11],[41,14,34,12,"workerId"],[41,22,34,20],[41,23,34,21],[41,24,34,22,"attendance"],[41,34,34,32],[41,37,34,35],[41,39,34,37],[42,4,35,2],[44,4,37,2],[45,4,38,2],[45,10,38,8,"existingIndex"],[45,23,38,21],[45,26,38,24,"workers"],[45,33,38,31],[45,34,38,32,"workerId"],[45,42,38,40],[45,43,38,41],[45,44,38,42,"attendance"],[45,54,38,52],[45,55,38,53,"findIndex"],[45,64,38,62],[45,65,38,63,"a"],[45,66,38,64],[45,70,38,68,"a"],[45,71,38,69],[45,72,38,70,"date"],[45,76,38,74],[45,81,38,79,"dateISO"],[45,88,38,86],[45,89,38,87],[46,4,40,2],[46,10,40,8,"record"],[46,16,40,14],[46,19,40,17],[47,6,41,4,"date"],[47,10,41,8],[47,12,41,10,"dateISO"],[47,19,41,17],[48,6,42,4,"status"],[48,12,42,10],[48,14,42,12,"status"],[48,20,42,18],[49,6,43,4,"markedAt"],[49,14,43,12],[49,16,43,14,"Date"],[49,20,43,18],[49,21,43,19,"now"],[49,24,43,22],[49,25,43,23],[50,4,44,2],[50,5,44,3],[51,4,46,2],[51,8,46,6,"existingIndex"],[51,21,46,19],[51,25,46,23],[51,26,46,24],[51,28,46,26],[52,6,47,4,"workers"],[52,13,47,11],[52,14,47,12,"workerId"],[52,22,47,20],[52,23,47,21],[52,24,47,22,"attendance"],[52,34,47,32],[52,35,47,33,"existingIndex"],[52,48,47,46],[52,49,47,47],[52,52,47,50,"record"],[52,58,47,56],[53,4,48,2],[53,5,48,3],[53,11,48,9],[54,6,49,4,"workers"],[54,13,49,11],[54,14,49,12,"workerId"],[54,22,49,20],[54,23,49,21],[54,24,49,22,"attendance"],[54,34,49,32],[54,35,49,33,"push"],[54,39,49,37],[54,40,49,38,"record"],[54,46,49,44],[54,47,49,45],[55,4,50,2],[56,4,52,2,"saveWorkers"],[56,15,52,13],[56,16,52,14,"workers"],[56,23,52,21],[56,24,52,22],[57,4,53,2],[57,11,53,9,"workers"],[57,18,53,16],[57,19,53,17,"workerId"],[57,27,53,25],[57,28,53,26],[58,2,54,0],[59,2,56,7],[59,11,56,16,"isExpired"],[59,20,56,25,"isExpired"],[59,21,56,26,"markedAt"],[59,29,56,34],[59,31,56,36],[60,4,57,2],[60,8,57,6],[60,9,57,7,"markedAt"],[60,17,57,15],[60,19,57,17],[60,26,57,24],[60,31,57,29],[61,4,58,2],[61,10,58,8,"now"],[61,13,58,11],[61,16,58,14,"Date"],[61,20,58,18],[61,21,58,19,"now"],[61,24,58,22],[61,25,58,23],[61,26,58,24],[62,4,59,2],[62,10,59,8,"elapsed"],[62,17,59,15],[62,20,59,18,"now"],[62,23,59,21],[62,26,59,24,"markedAt"],[62,34,59,32],[63,4,60,2],[63,10,60,8,"twentyFourHours"],[63,25,60,23],[63,36,60,45],[64,4,61,2],[64,11,61,9,"elapsed"],[64,18,61,16],[64,21,61,19,"twentyFourHours"],[64,36,61,34],[65,2,62,0],[66,0,62,1],[66,3]],"functionMap":{"names":["<global>","loadWorkers","saveWorkers","updateAttendance","workers.workerId.attendance.findIndex$argument_0","isExpired"],"mappings":"AAA;OCK;CDQ;OEE;CFQ;OGE;+DCY,uBD;CHgB;OKE"},"hasCjsExports":false},"type":"js/module"}]}