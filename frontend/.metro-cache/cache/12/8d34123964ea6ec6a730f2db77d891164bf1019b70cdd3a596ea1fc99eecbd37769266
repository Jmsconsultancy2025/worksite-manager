{"dependencies":[],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.loadWorkers = loadWorkers;\n  exports.saveWorkers = saveWorkers;\n  exports.updateAttendance = updateAttendance;\n  exports.isExpired = isExpired;\n  // localStorage helper functions for worker data\n\n  const WORKERS_KEY = 'worksite_workers';\n  function loadWorkers() {\n    try {\n      const data = localStorage.getItem(WORKERS_KEY);\n      return data ? JSON.parse(data) : {};\n    } catch (error) {\n      console.error('Error loading workers:', error);\n      return {};\n    }\n  }\n  function saveWorkers(workers) {\n    try {\n      localStorage.setItem(WORKERS_KEY, JSON.stringify(workers));\n      return true;\n    } catch (error) {\n      console.error('Error saving workers:', error);\n      return false;\n    }\n  }\n  function updateAttendance(workerId, dateISO, status) {\n    const workers = loadWorkers();\n    if (!workers[workerId]) {\n      workers[workerId] = {\n        attendance: []\n      };\n    }\n    if (!workers[workerId].attendance) {\n      workers[workerId].attendance = [];\n    }\n\n    // Find existing or create new\n    const existingIndex = workers[workerId].attendance.findIndex(a => a.date === dateISO);\n    const record = {\n      date: dateISO,\n      status: status,\n      markedAt: Date.now()\n    };\n    if (existingIndex >= 0) {\n      workers[workerId].attendance[existingIndex] = record;\n    } else {\n      workers[workerId].attendance.push(record);\n    }\n    saveWorkers(workers);\n    return workers[workerId];\n  }\n  function isExpired(markedAt) {\n    if (!markedAt) return false;\n    const now = Date.now();\n    const elapsed = now - markedAt;\n    const twentyFourHours = 24 * 60 * 60 * 1000;\n    return elapsed > twentyFourHours;\n  }\n});","lineCount":65,"map":[[7,2,5,0,"exports"],[7,9,5,0],[7,10,5,0,"loadWorkers"],[7,21,5,0],[7,24,5,0,"loadWorkers"],[7,35,5,0],[8,2,15,0,"exports"],[8,9,15,0],[8,10,15,0,"saveWorkers"],[8,21,15,0],[8,24,15,0,"saveWorkers"],[8,35,15,0],[9,2,25,0,"exports"],[9,9,25,0],[9,10,25,0,"updateAttendance"],[9,26,25,0],[9,29,25,0,"updateAttendance"],[9,45,25,0],[10,2,55,0,"exports"],[10,9,55,0],[10,10,55,0,"isExpired"],[10,19,55,0],[10,22,55,0,"isExpired"],[10,31,55,0],[11,2,1,0],[13,2,3,0],[13,8,3,6,"WORKERS_KEY"],[13,19,3,17],[13,22,3,20],[13,40,3,38],[14,2,5,7],[14,11,5,16,"loadWorkers"],[14,22,5,27,"loadWorkers"],[14,23,5,27],[14,25,5,30],[15,4,6,2],[15,8,6,6],[16,6,7,4],[16,12,7,10,"data"],[16,16,7,14],[16,19,7,17,"localStorage"],[16,31,7,29],[16,32,7,30,"getItem"],[16,39,7,37],[16,40,7,38,"WORKERS_KEY"],[16,51,7,49],[16,52,7,50],[17,6,8,4],[17,13,8,11,"data"],[17,17,8,15],[17,20,8,18,"JSON"],[17,24,8,22],[17,25,8,23,"parse"],[17,30,8,28],[17,31,8,29,"data"],[17,35,8,33],[17,36,8,34],[17,39,8,37],[17,40,8,38],[17,41,8,39],[18,4,9,2],[18,5,9,3],[18,6,9,4],[18,13,9,11,"error"],[18,18,9,16],[18,20,9,18],[19,6,10,4,"console"],[19,13,10,11],[19,14,10,12,"error"],[19,19,10,17],[19,20,10,18],[19,44,10,42],[19,46,10,44,"error"],[19,51,10,49],[19,52,10,50],[20,6,11,4],[20,13,11,11],[20,14,11,12],[20,15,11,13],[21,4,12,2],[22,2,13,0],[23,2,15,7],[23,11,15,16,"saveWorkers"],[23,22,15,27,"saveWorkers"],[23,23,15,28,"workers"],[23,30,15,35],[23,32,15,37],[24,4,16,2],[24,8,16,6],[25,6,17,4,"localStorage"],[25,18,17,16],[25,19,17,17,"setItem"],[25,26,17,24],[25,27,17,25,"WORKERS_KEY"],[25,38,17,36],[25,40,17,38,"JSON"],[25,44,17,42],[25,45,17,43,"stringify"],[25,54,17,52],[25,55,17,53,"workers"],[25,62,17,60],[25,63,17,61],[25,64,17,62],[26,6,18,4],[26,13,18,11],[26,17,18,15],[27,4,19,2],[27,5,19,3],[27,6,19,4],[27,13,19,11,"error"],[27,18,19,16],[27,20,19,18],[28,6,20,4,"console"],[28,13,20,11],[28,14,20,12,"error"],[28,19,20,17],[28,20,20,18],[28,43,20,41],[28,45,20,43,"error"],[28,50,20,48],[28,51,20,49],[29,6,21,4],[29,13,21,11],[29,18,21,16],[30,4,22,2],[31,2,23,0],[32,2,25,7],[32,11,25,16,"updateAttendance"],[32,27,25,32,"updateAttendance"],[32,28,25,33,"workerId"],[32,36,25,41],[32,38,25,43,"dateISO"],[32,45,25,50],[32,47,25,52,"status"],[32,53,25,58],[32,55,25,60],[33,4,26,2],[33,10,26,8,"workers"],[33,17,26,15],[33,20,26,18,"loadWorkers"],[33,31,26,29],[33,32,26,30],[33,33,26,31],[34,4,28,2],[34,8,28,6],[34,9,28,7,"workers"],[34,16,28,14],[34,17,28,15,"workerId"],[34,25,28,23],[34,26,28,24],[34,28,28,26],[35,6,29,4,"workers"],[35,13,29,11],[35,14,29,12,"workerId"],[35,22,29,20],[35,23,29,21],[35,26,29,24],[36,8,29,26,"attendance"],[36,18,29,36],[36,20,29,38],[37,6,29,41],[37,7,29,42],[38,4,30,2],[39,4,32,2],[39,8,32,6],[39,9,32,7,"workers"],[39,16,32,14],[39,17,32,15,"workerId"],[39,25,32,23],[39,26,32,24],[39,27,32,25,"attendance"],[39,37,32,35],[39,39,32,37],[40,6,33,4,"workers"],[40,13,33,11],[40,14,33,12,"workerId"],[40,22,33,20],[40,23,33,21],[40,24,33,22,"attendance"],[40,34,33,32],[40,37,33,35],[40,39,33,37],[41,4,34,2],[43,4,36,2],[44,4,37,2],[44,10,37,8,"existingIndex"],[44,23,37,21],[44,26,37,24,"workers"],[44,33,37,31],[44,34,37,32,"workerId"],[44,42,37,40],[44,43,37,41],[44,44,37,42,"attendance"],[44,54,37,52],[44,55,37,53,"findIndex"],[44,64,37,62],[44,65,37,63,"a"],[44,66,37,64],[44,70,37,68,"a"],[44,71,37,69],[44,72,37,70,"date"],[44,76,37,74],[44,81,37,79,"dateISO"],[44,88,37,86],[44,89,37,87],[45,4,39,2],[45,10,39,8,"record"],[45,16,39,14],[45,19,39,17],[46,6,40,4,"date"],[46,10,40,8],[46,12,40,10,"dateISO"],[46,19,40,17],[47,6,41,4,"status"],[47,12,41,10],[47,14,41,12,"status"],[47,20,41,18],[48,6,42,4,"markedAt"],[48,14,42,12],[48,16,42,14,"Date"],[48,20,42,18],[48,21,42,19,"now"],[48,24,42,22],[48,25,42,23],[49,4,43,2],[49,5,43,3],[50,4,45,2],[50,8,45,6,"existingIndex"],[50,21,45,19],[50,25,45,23],[50,26,45,24],[50,28,45,26],[51,6,46,4,"workers"],[51,13,46,11],[51,14,46,12,"workerId"],[51,22,46,20],[51,23,46,21],[51,24,46,22,"attendance"],[51,34,46,32],[51,35,46,33,"existingIndex"],[51,48,46,46],[51,49,46,47],[51,52,46,50,"record"],[51,58,46,56],[52,4,47,2],[52,5,47,3],[52,11,47,9],[53,6,48,4,"workers"],[53,13,48,11],[53,14,48,12,"workerId"],[53,22,48,20],[53,23,48,21],[53,24,48,22,"attendance"],[53,34,48,32],[53,35,48,33,"push"],[53,39,48,37],[53,40,48,38,"record"],[53,46,48,44],[53,47,48,45],[54,4,49,2],[55,4,51,2,"saveWorkers"],[55,15,51,13],[55,16,51,14,"workers"],[55,23,51,21],[55,24,51,22],[56,4,52,2],[56,11,52,9,"workers"],[56,18,52,16],[56,19,52,17,"workerId"],[56,27,52,25],[56,28,52,26],[57,2,53,0],[58,2,55,7],[58,11,55,16,"isExpired"],[58,20,55,25,"isExpired"],[58,21,55,26,"markedAt"],[58,29,55,34],[58,31,55,36],[59,4,56,2],[59,8,56,6],[59,9,56,7,"markedAt"],[59,17,56,15],[59,19,56,17],[59,26,56,24],[59,31,56,29],[60,4,57,2],[60,10,57,8,"now"],[60,13,57,11],[60,16,57,14,"Date"],[60,20,57,18],[60,21,57,19,"now"],[60,24,57,22],[60,25,57,23],[60,26,57,24],[61,4,58,2],[61,10,58,8,"elapsed"],[61,17,58,15],[61,20,58,18,"now"],[61,23,58,21],[61,26,58,24,"markedAt"],[61,34,58,32],[62,4,59,2],[62,10,59,8,"twentyFourHours"],[62,25,59,23],[62,28,59,26],[62,30,59,28],[62,33,59,31],[62,35,59,33],[62,38,59,36],[62,40,59,38],[62,43,59,41],[62,47,59,45],[63,4,60,2],[63,11,60,9,"elapsed"],[63,18,60,16],[63,21,60,19,"twentyFourHours"],[63,36,60,34],[64,2,61,0],[65,0,61,1],[65,3]],"functionMap":{"names":["<global>","loadWorkers","saveWorkers","updateAttendance","workers.workerId.attendance.findIndex$argument_0","isExpired"],"mappings":"AAA;OCI;CDQ;OEE;CFQ;OGE;+DCY,uBD;CHgB;OKE;CLM"},"hasCjsExports":false},"type":"js/module"}]}