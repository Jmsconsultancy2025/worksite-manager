{"dependencies":[{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":100},"end":{"line":4,"column":69,"index":169}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.loadWorkers = loadWorkers;\n  exports.saveWorkers = saveWorkers;\n  exports.updateAttendance = updateAttendance;\n  exports.isExpired = isExpired;\n  exports.getUserSubscription = getUserSubscription;\n  exports.setUserSubscription = setUserSubscription;\n  Object.defineProperty(exports, \"PLAN_LIMITS\", {\n    enumerable: true,\n    get: function () {\n      return PLAN_LIMITS;\n    }\n  });\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[0], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  // localStorage helper functions for worker data\n  // Note: Using localStorage for web compatibility\n\n  const WORKERS_KEY = 'worksite_workers';\n  const SUBSCRIPTION_KEY = '@currentSubscription';\n  function loadWorkers() {\n    try {\n      const data = localStorage.getItem(WORKERS_KEY);\n      return data ? JSON.parse(data) : {};\n    } catch (error) {\n      console.error('Error loading workers:', error);\n      return {};\n    }\n  }\n  function saveWorkers(workers) {\n    try {\n      localStorage.setItem(WORKERS_KEY, JSON.stringify(workers));\n      return true;\n    } catch (error) {\n      console.error('Error saving workers:', error);\n      return false;\n    }\n  }\n  function updateAttendance(workerId, dateISO, status) {\n    const workers = loadWorkers();\n    if (!workers[workerId]) {\n      workers[workerId] = {\n        attendance: []\n      };\n    }\n    if (!workers[workerId].attendance) {\n      workers[workerId].attendance = [];\n    }\n\n    // Find existing or create new\n    const existingIndex = workers[workerId].attendance.findIndex(a => a.date === dateISO);\n    const record = {\n      date: dateISO,\n      status: status,\n      markedAt: Date.now()\n    };\n    if (existingIndex >= 0) {\n      workers[workerId].attendance[existingIndex] = record;\n    } else {\n      workers[workerId].attendance.push(record);\n    }\n    saveWorkers(workers);\n    return workers[workerId];\n  }\n  function isExpired(markedAt) {\n    if (!markedAt) return false;\n    const now = Date.now();\n    const elapsed = now - markedAt;\n    const twentyFourHours = 24 * 60 * 60 * 1000;\n    return elapsed > twentyFourHours;\n  }\n  async function getUserSubscription() {\n    try {\n      const raw = await AsyncStorage.default.getItem(SUBSCRIPTION_KEY);\n      return raw ? JSON.parse(raw) : {\n        plan: 'basic',\n        status: 'active'\n      };\n    } catch (e) {\n      return {\n        plan: 'basic',\n        status: 'active'\n      };\n    }\n  }\n  async function setUserSubscription(subscription) {\n    try {\n      await AsyncStorage.default.setItem(SUBSCRIPTION_KEY, JSON.stringify(subscription));\n      return true;\n    } catch (e) {\n      console.error('Error saving subscription:', e);\n      return false;\n    }\n  }\n  const PLAN_LIMITS = {\n    basic: {\n      workers: 5,\n      sites: 3,\n      reports: 10,\n      features: ['basic_attendance']\n    },\n    premium: {\n      workers: 50,\n      sites: 20,\n      reports: 100,\n      features: ['advanced_attendance', 'salary_management', 'detailed_reports']\n    },\n    enterprise: {\n      workers: 200,\n      sites: 100,\n      reports: 1000,\n      features: ['all_features']\n    }\n  };\n});","lineCount":125,"map":[[12,2,9,0,"exports"],[12,9,9,0],[12,10,9,0,"loadWorkers"],[12,21,9,0],[12,24,9,0,"loadWorkers"],[12,35,9,0],[13,2,19,0,"exports"],[13,9,19,0],[13,10,19,0,"saveWorkers"],[13,21,19,0],[13,24,19,0,"saveWorkers"],[13,35,19,0],[14,2,29,0,"exports"],[14,9,29,0],[14,10,29,0,"updateAttendance"],[14,26,29,0],[14,29,29,0,"updateAttendance"],[14,45,29,0],[15,2,59,0,"exports"],[15,9,59,0],[15,10,59,0,"isExpired"],[15,19,59,0],[15,22,59,0,"isExpired"],[15,31,59,0],[16,2,67,0,"exports"],[16,9,67,0],[16,10,67,0,"getUserSubscription"],[16,29,67,0],[16,32,67,0,"getUserSubscription"],[16,51,67,0],[17,2,76,0,"exports"],[17,9,76,0],[17,10,76,0,"setUserSubscription"],[17,29,76,0],[17,32,76,0,"setUserSubscription"],[17,51,76,0],[18,2,86,0,"Object"],[18,8,86,0],[18,9,86,0,"defineProperty"],[18,23,86,0],[18,24,86,0,"exports"],[18,31,86,0],[19,4,86,0,"enumerable"],[19,14,86,0],[20,4,86,0,"get"],[20,7,86,0],[20,18,86,0,"get"],[20,19,86,0],[21,6,86,0],[21,13,86,0,"PLAN_LIMITS"],[21,24,86,0],[22,4,86,0],[23,2,86,0],[24,2,4,0],[24,6,4,0,"_reactNativeAsyncStorageAsyncStorage"],[24,42,4,0],[24,45,4,0,"require"],[24,52,4,0],[24,53,4,0,"_dependencyMap"],[24,67,4,0],[25,2,4,0],[25,6,4,0,"AsyncStorage"],[25,18,4,0],[25,21,4,0,"_interopDefault"],[25,36,4,0],[25,37,4,0,"_reactNativeAsyncStorageAsyncStorage"],[25,73,4,0],[26,2,1,0],[27,2,2,0],[29,2,6,0],[29,8,6,6,"WORKERS_KEY"],[29,19,6,17],[29,22,6,20],[29,40,6,38],[30,2,7,0],[30,8,7,6,"SUBSCRIPTION_KEY"],[30,24,7,22],[30,27,7,25],[30,49,7,47],[31,2,9,7],[31,11,9,16,"loadWorkers"],[31,22,9,27,"loadWorkers"],[31,23,9,27],[31,25,9,30],[32,4,10,2],[32,8,10,6],[33,6,11,4],[33,12,11,10,"data"],[33,16,11,14],[33,19,11,17,"localStorage"],[33,31,11,29],[33,32,11,30,"getItem"],[33,39,11,37],[33,40,11,38,"WORKERS_KEY"],[33,51,11,49],[33,52,11,50],[34,6,12,4],[34,13,12,11,"data"],[34,17,12,15],[34,20,12,18,"JSON"],[34,24,12,22],[34,25,12,23,"parse"],[34,30,12,28],[34,31,12,29,"data"],[34,35,12,33],[34,36,12,34],[34,39,12,37],[34,40,12,38],[34,41,12,39],[35,4,13,2],[35,5,13,3],[35,6,13,4],[35,13,13,11,"error"],[35,18,13,16],[35,20,13,18],[36,6,14,4,"console"],[36,13,14,11],[36,14,14,12,"error"],[36,19,14,17],[36,20,14,18],[36,44,14,42],[36,46,14,44,"error"],[36,51,14,49],[36,52,14,50],[37,6,15,4],[37,13,15,11],[37,14,15,12],[37,15,15,13],[38,4,16,2],[39,2,17,0],[40,2,19,7],[40,11,19,16,"saveWorkers"],[40,22,19,27,"saveWorkers"],[40,23,19,28,"workers"],[40,30,19,35],[40,32,19,37],[41,4,20,2],[41,8,20,6],[42,6,21,4,"localStorage"],[42,18,21,16],[42,19,21,17,"setItem"],[42,26,21,24],[42,27,21,25,"WORKERS_KEY"],[42,38,21,36],[42,40,21,38,"JSON"],[42,44,21,42],[42,45,21,43,"stringify"],[42,54,21,52],[42,55,21,53,"workers"],[42,62,21,60],[42,63,21,61],[42,64,21,62],[43,6,22,4],[43,13,22,11],[43,17,22,15],[44,4,23,2],[44,5,23,3],[44,6,23,4],[44,13,23,11,"error"],[44,18,23,16],[44,20,23,18],[45,6,24,4,"console"],[45,13,24,11],[45,14,24,12,"error"],[45,19,24,17],[45,20,24,18],[45,43,24,41],[45,45,24,43,"error"],[45,50,24,48],[45,51,24,49],[46,6,25,4],[46,13,25,11],[46,18,25,16],[47,4,26,2],[48,2,27,0],[49,2,29,7],[49,11,29,16,"updateAttendance"],[49,27,29,32,"updateAttendance"],[49,28,29,33,"workerId"],[49,36,29,41],[49,38,29,43,"dateISO"],[49,45,29,50],[49,47,29,52,"status"],[49,53,29,58],[49,55,29,60],[50,4,30,2],[50,10,30,8,"workers"],[50,17,30,15],[50,20,30,18,"loadWorkers"],[50,31,30,29],[50,32,30,30],[50,33,30,31],[51,4,32,2],[51,8,32,6],[51,9,32,7,"workers"],[51,16,32,14],[51,17,32,15,"workerId"],[51,25,32,23],[51,26,32,24],[51,28,32,26],[52,6,33,4,"workers"],[52,13,33,11],[52,14,33,12,"workerId"],[52,22,33,20],[52,23,33,21],[52,26,33,24],[53,8,33,26,"attendance"],[53,18,33,36],[53,20,33,38],[54,6,33,41],[54,7,33,42],[55,4,34,2],[56,4,36,2],[56,8,36,6],[56,9,36,7,"workers"],[56,16,36,14],[56,17,36,15,"workerId"],[56,25,36,23],[56,26,36,24],[56,27,36,25,"attendance"],[56,37,36,35],[56,39,36,37],[57,6,37,4,"workers"],[57,13,37,11],[57,14,37,12,"workerId"],[57,22,37,20],[57,23,37,21],[57,24,37,22,"attendance"],[57,34,37,32],[57,37,37,35],[57,39,37,37],[58,4,38,2],[60,4,40,2],[61,4,41,2],[61,10,41,8,"existingIndex"],[61,23,41,21],[61,26,41,24,"workers"],[61,33,41,31],[61,34,41,32,"workerId"],[61,42,41,40],[61,43,41,41],[61,44,41,42,"attendance"],[61,54,41,52],[61,55,41,53,"findIndex"],[61,64,41,62],[61,65,41,63,"a"],[61,66,41,64],[61,70,41,68,"a"],[61,71,41,69],[61,72,41,70,"date"],[61,76,41,74],[61,81,41,79,"dateISO"],[61,88,41,86],[61,89,41,87],[62,4,43,2],[62,10,43,8,"record"],[62,16,43,14],[62,19,43,17],[63,6,44,4,"date"],[63,10,44,8],[63,12,44,10,"dateISO"],[63,19,44,17],[64,6,45,4,"status"],[64,12,45,10],[64,14,45,12,"status"],[64,20,45,18],[65,6,46,4,"markedAt"],[65,14,46,12],[65,16,46,14,"Date"],[65,20,46,18],[65,21,46,19,"now"],[65,24,46,22],[65,25,46,23],[66,4,47,2],[66,5,47,3],[67,4,49,2],[67,8,49,6,"existingIndex"],[67,21,49,19],[67,25,49,23],[67,26,49,24],[67,28,49,26],[68,6,50,4,"workers"],[68,13,50,11],[68,14,50,12,"workerId"],[68,22,50,20],[68,23,50,21],[68,24,50,22,"attendance"],[68,34,50,32],[68,35,50,33,"existingIndex"],[68,48,50,46],[68,49,50,47],[68,52,50,50,"record"],[68,58,50,56],[69,4,51,2],[69,5,51,3],[69,11,51,9],[70,6,52,4,"workers"],[70,13,52,11],[70,14,52,12,"workerId"],[70,22,52,20],[70,23,52,21],[70,24,52,22,"attendance"],[70,34,52,32],[70,35,52,33,"push"],[70,39,52,37],[70,40,52,38,"record"],[70,46,52,44],[70,47,52,45],[71,4,53,2],[72,4,55,2,"saveWorkers"],[72,15,55,13],[72,16,55,14,"workers"],[72,23,55,21],[72,24,55,22],[73,4,56,2],[73,11,56,9,"workers"],[73,18,56,16],[73,19,56,17,"workerId"],[73,27,56,25],[73,28,56,26],[74,2,57,0],[75,2,59,7],[75,11,59,16,"isExpired"],[75,20,59,25,"isExpired"],[75,21,59,26,"markedAt"],[75,29,59,34],[75,31,59,36],[76,4,60,2],[76,8,60,6],[76,9,60,7,"markedAt"],[76,17,60,15],[76,19,60,17],[76,26,60,24],[76,31,60,29],[77,4,61,2],[77,10,61,8,"now"],[77,13,61,11],[77,16,61,14,"Date"],[77,20,61,18],[77,21,61,19,"now"],[77,24,61,22],[77,25,61,23],[77,26,61,24],[78,4,62,2],[78,10,62,8,"elapsed"],[78,17,62,15],[78,20,62,18,"now"],[78,23,62,21],[78,26,62,24,"markedAt"],[78,34,62,32],[79,4,63,2],[79,10,63,8,"twentyFourHours"],[79,25,63,23],[79,28,63,26],[79,30,63,28],[79,33,63,31],[79,35,63,33],[79,38,63,36],[79,40,63,38],[79,43,63,41],[79,47,63,45],[80,4,64,2],[80,11,64,9,"elapsed"],[80,18,64,16],[80,21,64,19,"twentyFourHours"],[80,36,64,34],[81,2,65,0],[82,2,67,7],[82,17,67,22,"getUserSubscription"],[82,36,67,41,"getUserSubscription"],[82,37,67,41],[82,39,67,44],[83,4,68,2],[83,8,68,6],[84,6,69,4],[84,12,69,10,"raw"],[84,15,69,13],[84,18,69,16],[84,24,69,22,"AsyncStorage"],[84,36,69,34],[84,37,69,34,"default"],[84,44,69,34],[84,45,69,35,"getItem"],[84,52,69,42],[84,53,69,43,"SUBSCRIPTION_KEY"],[84,69,69,59],[84,70,69,60],[85,6,70,4],[85,13,70,11,"raw"],[85,16,70,14],[85,19,70,17,"JSON"],[85,23,70,21],[85,24,70,22,"parse"],[85,29,70,27],[85,30,70,28,"raw"],[85,33,70,31],[85,34,70,32],[85,37,70,35],[86,8,70,37,"plan"],[86,12,70,41],[86,14,70,43],[86,21,70,50],[87,8,70,52,"status"],[87,14,70,58],[87,16,70,60],[88,6,70,69],[88,7,70,70],[89,4,71,2],[89,5,71,3],[89,6,71,4],[89,13,71,10,"e"],[89,14,71,11],[89,16,71,13],[90,6,72,4],[90,13,72,11],[91,8,72,13,"plan"],[91,12,72,17],[91,14,72,19],[91,21,72,26],[92,8,72,28,"status"],[92,14,72,34],[92,16,72,36],[93,6,72,45],[93,7,72,46],[94,4,73,2],[95,2,74,0],[96,2,76,7],[96,17,76,22,"setUserSubscription"],[96,36,76,41,"setUserSubscription"],[96,37,76,42,"subscription"],[96,49,76,54],[96,51,76,56],[97,4,77,2],[97,8,77,6],[98,6,78,4],[98,12,78,10,"AsyncStorage"],[98,24,78,22],[98,25,78,22,"default"],[98,32,78,22],[98,33,78,23,"setItem"],[98,40,78,30],[98,41,78,31,"SUBSCRIPTION_KEY"],[98,57,78,47],[98,59,78,49,"JSON"],[98,63,78,53],[98,64,78,54,"stringify"],[98,73,78,63],[98,74,78,64,"subscription"],[98,86,78,76],[98,87,78,77],[98,88,78,78],[99,6,79,4],[99,13,79,11],[99,17,79,15],[100,4,80,2],[100,5,80,3],[100,6,80,4],[100,13,80,10,"e"],[100,14,80,11],[100,16,80,13],[101,6,81,4,"console"],[101,13,81,11],[101,14,81,12,"error"],[101,19,81,17],[101,20,81,18],[101,48,81,46],[101,50,81,48,"e"],[101,51,81,49],[101,52,81,50],[102,6,82,4],[102,13,82,11],[102,18,82,16],[103,4,83,2],[104,2,84,0],[105,2,86,7],[105,8,86,13,"PLAN_LIMITS"],[105,19,86,24],[105,22,86,27],[106,4,87,2,"basic"],[106,9,87,7],[106,11,87,9],[107,6,88,4,"workers"],[107,13,88,11],[107,15,88,13],[107,16,88,14],[108,6,89,4,"sites"],[108,11,89,9],[108,13,89,11],[108,14,89,12],[109,6,90,4,"reports"],[109,13,90,11],[109,15,90,13],[109,17,90,15],[110,6,91,4,"features"],[110,14,91,12],[110,16,91,14],[110,17,91,15],[110,35,91,33],[111,4,92,2],[111,5,92,3],[112,4,93,2,"premium"],[112,11,93,9],[112,13,93,11],[113,6,94,4,"workers"],[113,13,94,11],[113,15,94,13],[113,17,94,15],[114,6,95,4,"sites"],[114,11,95,9],[114,13,95,11],[114,15,95,13],[115,6,96,4,"reports"],[115,13,96,11],[115,15,96,13],[115,18,96,16],[116,6,97,4,"features"],[116,14,97,12],[116,16,97,14],[116,17,97,15],[116,38,97,36],[116,40,97,38],[116,59,97,57],[116,61,97,59],[116,79,97,77],[117,4,98,2],[117,5,98,3],[118,4,99,2,"enterprise"],[118,14,99,12],[118,16,99,14],[119,6,100,4,"workers"],[119,13,100,11],[119,15,100,13],[119,18,100,16],[120,6,101,4,"sites"],[120,11,101,9],[120,13,101,11],[120,16,101,14],[121,6,102,4,"reports"],[121,13,102,11],[121,15,102,13],[121,19,102,17],[122,6,103,4,"features"],[122,14,103,12],[122,16,103,14],[122,17,103,15],[122,31,103,29],[123,4,104,2],[124,2,105,0],[124,3,105,1],[125,0,105,2],[125,3]],"functionMap":{"names":["<global>","loadWorkers","saveWorkers","updateAttendance","workers.workerId.attendance.findIndex$argument_0","isExpired","getUserSubscription","setUserSubscription"],"mappings":"AAA;OCQ;CDQ;OEE;CFQ;OGE;+DCY,uBD;CHgB;OKE;CLM;OME;CNO;OOE;CPQ"},"hasCjsExports":false},"type":"js/module"}]}