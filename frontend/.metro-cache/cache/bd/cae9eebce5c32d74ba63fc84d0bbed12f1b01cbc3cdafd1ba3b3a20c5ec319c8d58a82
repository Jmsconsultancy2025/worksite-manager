{"dependencies":[{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":49},"end":{"line":2,"column":69,"index":118}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.loadWorkers = loadWorkers;\n  exports.saveWorkers = saveWorkers;\n  exports.updateAttendance = updateAttendance;\n  exports.isExpired = isExpired;\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[0], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  // AsyncStorage helper functions for worker data\n\n  const WORKERS_KEY = 'worksite_workers';\n  async function loadWorkers() {\n    try {\n      const data = await AsyncStorage.default.getItem(WORKERS_KEY);\n      return data ? JSON.parse(data) : {};\n    } catch (error) {\n      console.error('Error loading workers:', error);\n      return {};\n    }\n  }\n  async function saveWorkers(workers) {\n    try {\n      await AsyncStorage.default.setItem(WORKERS_KEY, JSON.stringify(workers));\n      return true;\n    } catch (error) {\n      console.error('Error saving workers:', error);\n      return false;\n    }\n  }\n  async function updateAttendance(workerId, dateISO, status) {\n    const workers = await loadWorkers();\n    if (!workers[workerId]) {\n      workers[workerId] = {\n        attendance: []\n      };\n    }\n    if (!workers[workerId].attendance) {\n      workers[workerId].attendance = [];\n    }\n\n    // Find existing or create new\n    const existingIndex = workers[workerId].attendance.findIndex(a => a.date === dateISO);\n    const record = {\n      date: dateISO,\n      status: status,\n      markedAt: Date.now()\n    };\n    if (existingIndex >= 0) {\n      workers[workerId].attendance[existingIndex] = record;\n    } else {\n      workers[workerId].attendance.push(record);\n    }\n    await saveWorkers(workers);\n    return workers[workerId];\n  }\n  function isExpired(markedAt) {\n    if (!markedAt) return false;\n    const now = Date.now();\n    const elapsed = now - markedAt;\n    const twentyFourHours = 24 * 60 * 60 * 1000;\n    return elapsed > twentyFourHours;\n  }\n});","lineCount":72,"map":[[12,2,6,0,"exports"],[12,9,6,0],[12,10,6,0,"loadWorkers"],[12,21,6,0],[12,24,6,0,"loadWorkers"],[12,35,6,0],[13,2,16,0,"exports"],[13,9,16,0],[13,10,16,0,"saveWorkers"],[13,21,16,0],[13,24,16,0,"saveWorkers"],[13,35,16,0],[14,2,26,0,"exports"],[14,9,26,0],[14,10,26,0,"updateAttendance"],[14,26,26,0],[14,29,26,0,"updateAttendance"],[14,45,26,0],[15,2,56,0,"exports"],[15,9,56,0],[15,10,56,0,"isExpired"],[15,19,56,0],[15,22,56,0,"isExpired"],[15,31,56,0],[16,2,2,0],[16,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[16,42,2,0],[16,45,2,0,"require"],[16,52,2,0],[16,53,2,0,"_dependencyMap"],[16,67,2,0],[17,2,2,0],[17,6,2,0,"AsyncStorage"],[17,18,2,0],[17,21,2,0,"_interopDefault"],[17,36,2,0],[17,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[17,73,2,0],[18,2,1,0],[20,2,4,0],[20,8,4,6,"WORKERS_KEY"],[20,19,4,17],[20,22,4,20],[20,40,4,38],[21,2,6,7],[21,17,6,22,"loadWorkers"],[21,28,6,33,"loadWorkers"],[21,29,6,33],[21,31,6,36],[22,4,7,2],[22,8,7,6],[23,6,8,4],[23,12,8,10,"data"],[23,16,8,14],[23,19,8,17],[23,25,8,23,"AsyncStorage"],[23,37,8,35],[23,38,8,35,"default"],[23,45,8,35],[23,46,8,36,"getItem"],[23,53,8,43],[23,54,8,44,"WORKERS_KEY"],[23,65,8,55],[23,66,8,56],[24,6,9,4],[24,13,9,11,"data"],[24,17,9,15],[24,20,9,18,"JSON"],[24,24,9,22],[24,25,9,23,"parse"],[24,30,9,28],[24,31,9,29,"data"],[24,35,9,33],[24,36,9,34],[24,39,9,37],[24,40,9,38],[24,41,9,39],[25,4,10,2],[25,5,10,3],[25,6,10,4],[25,13,10,11,"error"],[25,18,10,16],[25,20,10,18],[26,6,11,4,"console"],[26,13,11,11],[26,14,11,12,"error"],[26,19,11,17],[26,20,11,18],[26,44,11,42],[26,46,11,44,"error"],[26,51,11,49],[26,52,11,50],[27,6,12,4],[27,13,12,11],[27,14,12,12],[27,15,12,13],[28,4,13,2],[29,2,14,0],[30,2,16,7],[30,17,16,22,"saveWorkers"],[30,28,16,33,"saveWorkers"],[30,29,16,34,"workers"],[30,36,16,41],[30,38,16,43],[31,4,17,2],[31,8,17,6],[32,6,18,4],[32,12,18,10,"AsyncStorage"],[32,24,18,22],[32,25,18,22,"default"],[32,32,18,22],[32,33,18,23,"setItem"],[32,40,18,30],[32,41,18,31,"WORKERS_KEY"],[32,52,18,42],[32,54,18,44,"JSON"],[32,58,18,48],[32,59,18,49,"stringify"],[32,68,18,58],[32,69,18,59,"workers"],[32,76,18,66],[32,77,18,67],[32,78,18,68],[33,6,19,4],[33,13,19,11],[33,17,19,15],[34,4,20,2],[34,5,20,3],[34,6,20,4],[34,13,20,11,"error"],[34,18,20,16],[34,20,20,18],[35,6,21,4,"console"],[35,13,21,11],[35,14,21,12,"error"],[35,19,21,17],[35,20,21,18],[35,43,21,41],[35,45,21,43,"error"],[35,50,21,48],[35,51,21,49],[36,6,22,4],[36,13,22,11],[36,18,22,16],[37,4,23,2],[38,2,24,0],[39,2,26,7],[39,17,26,22,"updateAttendance"],[39,33,26,38,"updateAttendance"],[39,34,26,39,"workerId"],[39,42,26,47],[39,44,26,49,"dateISO"],[39,51,26,56],[39,53,26,58,"status"],[39,59,26,64],[39,61,26,66],[40,4,27,2],[40,10,27,8,"workers"],[40,17,27,15],[40,20,27,18],[40,26,27,24,"loadWorkers"],[40,37,27,35],[40,38,27,36],[40,39,27,37],[41,4,29,2],[41,8,29,6],[41,9,29,7,"workers"],[41,16,29,14],[41,17,29,15,"workerId"],[41,25,29,23],[41,26,29,24],[41,28,29,26],[42,6,30,4,"workers"],[42,13,30,11],[42,14,30,12,"workerId"],[42,22,30,20],[42,23,30,21],[42,26,30,24],[43,8,30,26,"attendance"],[43,18,30,36],[43,20,30,38],[44,6,30,41],[44,7,30,42],[45,4,31,2],[46,4,33,2],[46,8,33,6],[46,9,33,7,"workers"],[46,16,33,14],[46,17,33,15,"workerId"],[46,25,33,23],[46,26,33,24],[46,27,33,25,"attendance"],[46,37,33,35],[46,39,33,37],[47,6,34,4,"workers"],[47,13,34,11],[47,14,34,12,"workerId"],[47,22,34,20],[47,23,34,21],[47,24,34,22,"attendance"],[47,34,34,32],[47,37,34,35],[47,39,34,37],[48,4,35,2],[50,4,37,2],[51,4,38,2],[51,10,38,8,"existingIndex"],[51,23,38,21],[51,26,38,24,"workers"],[51,33,38,31],[51,34,38,32,"workerId"],[51,42,38,40],[51,43,38,41],[51,44,38,42,"attendance"],[51,54,38,52],[51,55,38,53,"findIndex"],[51,64,38,62],[51,65,38,63,"a"],[51,66,38,64],[51,70,38,68,"a"],[51,71,38,69],[51,72,38,70,"date"],[51,76,38,74],[51,81,38,79,"dateISO"],[51,88,38,86],[51,89,38,87],[52,4,40,2],[52,10,40,8,"record"],[52,16,40,14],[52,19,40,17],[53,6,41,4,"date"],[53,10,41,8],[53,12,41,10,"dateISO"],[53,19,41,17],[54,6,42,4,"status"],[54,12,42,10],[54,14,42,12,"status"],[54,20,42,18],[55,6,43,4,"markedAt"],[55,14,43,12],[55,16,43,14,"Date"],[55,20,43,18],[55,21,43,19,"now"],[55,24,43,22],[55,25,43,23],[56,4,44,2],[56,5,44,3],[57,4,46,2],[57,8,46,6,"existingIndex"],[57,21,46,19],[57,25,46,23],[57,26,46,24],[57,28,46,26],[58,6,47,4,"workers"],[58,13,47,11],[58,14,47,12,"workerId"],[58,22,47,20],[58,23,47,21],[58,24,47,22,"attendance"],[58,34,47,32],[58,35,47,33,"existingIndex"],[58,48,47,46],[58,49,47,47],[58,52,47,50,"record"],[58,58,47,56],[59,4,48,2],[59,5,48,3],[59,11,48,9],[60,6,49,4,"workers"],[60,13,49,11],[60,14,49,12,"workerId"],[60,22,49,20],[60,23,49,21],[60,24,49,22,"attendance"],[60,34,49,32],[60,35,49,33,"push"],[60,39,49,37],[60,40,49,38,"record"],[60,46,49,44],[60,47,49,45],[61,4,50,2],[62,4,52,2],[62,10,52,8,"saveWorkers"],[62,21,52,19],[62,22,52,20,"workers"],[62,29,52,27],[62,30,52,28],[63,4,53,2],[63,11,53,9,"workers"],[63,18,53,16],[63,19,53,17,"workerId"],[63,27,53,25],[63,28,53,26],[64,2,54,0],[65,2,56,7],[65,11,56,16,"isExpired"],[65,20,56,25,"isExpired"],[65,21,56,26,"markedAt"],[65,29,56,34],[65,31,56,36],[66,4,57,2],[66,8,57,6],[66,9,57,7,"markedAt"],[66,17,57,15],[66,19,57,17],[66,26,57,24],[66,31,57,29],[67,4,58,2],[67,10,58,8,"now"],[67,13,58,11],[67,16,58,14,"Date"],[67,20,58,18],[67,21,58,19,"now"],[67,24,58,22],[67,25,58,23],[67,26,58,24],[68,4,59,2],[68,10,59,8,"elapsed"],[68,17,59,15],[68,20,59,18,"now"],[68,23,59,21],[68,26,59,24,"markedAt"],[68,34,59,32],[69,4,60,2],[69,10,60,8,"twentyFourHours"],[69,25,60,23],[69,28,60,26],[69,30,60,28],[69,33,60,31],[69,35,60,33],[69,38,60,36],[69,40,60,38],[69,43,60,41],[69,47,60,45],[70,4,61,2],[70,11,61,9,"elapsed"],[70,18,61,16],[70,21,61,19,"twentyFourHours"],[70,36,61,34],[71,2,62,0],[72,0,62,1],[72,3]],"functionMap":{"names":["<global>","loadWorkers","saveWorkers","updateAttendance","workers.workerId.attendance.findIndex$argument_0","isExpired"],"mappings":"AAA;OCK;CDQ;OEE;CFQ;OGE;+DCY,uBD;CHgB;OKE;CLM"},"hasCjsExports":false},"type":"js/module"}]}