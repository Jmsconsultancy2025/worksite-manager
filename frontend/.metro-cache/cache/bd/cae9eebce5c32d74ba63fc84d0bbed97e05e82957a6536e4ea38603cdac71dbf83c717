{"dependencies":[{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":49},"end":{"line":2,"column":69,"index":118}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.loadWorkers = loadWorkers;\n  exports.saveWorkers = saveWorkers;\n  exports.updateAttendance = updateAttendance;\n  exports.updateWorkerHiddenStatus = updateWorkerHiddenStatus;\n  exports.isExpired = isExpired;\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[0], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  // AsyncStorage helper functions for worker data\n\n  const WORKERS_KEY = 'worksite_workers';\n  async function loadWorkers() {\n    try {\n      const data = await AsyncStorage.default.getItem(WORKERS_KEY);\n      return data ? JSON.parse(data) : {};\n    } catch (error) {\n      console.error('Error loading workers:', error);\n      return {};\n    }\n  }\n  async function saveWorkers(workers) {\n    try {\n      await AsyncStorage.default.setItem(WORKERS_KEY, JSON.stringify(workers));\n      return true;\n    } catch (error) {\n      console.error('Error saving workers:', error);\n      return false;\n    }\n  }\n  async function updateAttendance(workerId, dateISO, status) {\n    const workers = await loadWorkers();\n    if (!workers[workerId]) {\n      workers[workerId] = {\n        attendance: []\n      };\n    }\n    if (!workers[workerId].attendance) {\n      workers[workerId].attendance = [];\n    }\n\n    // Find existing or create new\n    const existingIndex = workers[workerId].attendance.findIndex(a => a.date === dateISO);\n    const record = {\n      date: dateISO,\n      status: status,\n      markedAt: Date.now()\n    };\n    if (existingIndex >= 0) {\n      workers[workerId].attendance[existingIndex] = record;\n    } else {\n      workers[workerId].attendance.push(record);\n    }\n    await saveWorkers(workers);\n    return workers[workerId];\n  }\n  async function updateWorkerHiddenStatus(workerId, hidden) {\n    const workers = await loadWorkers();\n    if (!workers[workerId]) {\n      workers[workerId] = {};\n    }\n    workers[workerId].hidden = hidden;\n    await saveWorkers(workers);\n    return workers[workerId];\n  }\n  function isExpired(markedAt) {\n    if (!markedAt) return false;\n    const now = Date.now();\n    const elapsed = now - markedAt;\n    const twentyFourHours = 24 * 60 * 60 * 1000;\n    return elapsed > twentyFourHours;\n  }\n});","lineCount":82,"map":[[12,2,6,0,"exports"],[12,9,6,0],[12,10,6,0,"loadWorkers"],[12,21,6,0],[12,24,6,0,"loadWorkers"],[12,35,6,0],[13,2,16,0,"exports"],[13,9,16,0],[13,10,16,0,"saveWorkers"],[13,21,16,0],[13,24,16,0,"saveWorkers"],[13,35,16,0],[14,2,26,0,"exports"],[14,9,26,0],[14,10,26,0,"updateAttendance"],[14,26,26,0],[14,29,26,0,"updateAttendance"],[14,45,26,0],[15,2,56,0,"exports"],[15,9,56,0],[15,10,56,0,"updateWorkerHiddenStatus"],[15,34,56,0],[15,37,56,0,"updateWorkerHiddenStatus"],[15,61,56,0],[16,2,68,0,"exports"],[16,9,68,0],[16,10,68,0,"isExpired"],[16,19,68,0],[16,22,68,0,"isExpired"],[16,31,68,0],[17,2,2,0],[17,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[17,42,2,0],[17,45,2,0,"require"],[17,52,2,0],[17,53,2,0,"_dependencyMap"],[17,67,2,0],[18,2,2,0],[18,6,2,0,"AsyncStorage"],[18,18,2,0],[18,21,2,0,"_interopDefault"],[18,36,2,0],[18,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[18,73,2,0],[19,2,1,0],[21,2,4,0],[21,8,4,6,"WORKERS_KEY"],[21,19,4,17],[21,22,4,20],[21,40,4,38],[22,2,6,7],[22,17,6,22,"loadWorkers"],[22,28,6,33,"loadWorkers"],[22,29,6,33],[22,31,6,36],[23,4,7,2],[23,8,7,6],[24,6,8,4],[24,12,8,10,"data"],[24,16,8,14],[24,19,8,17],[24,25,8,23,"AsyncStorage"],[24,37,8,35],[24,38,8,35,"default"],[24,45,8,35],[24,46,8,36,"getItem"],[24,53,8,43],[24,54,8,44,"WORKERS_KEY"],[24,65,8,55],[24,66,8,56],[25,6,9,4],[25,13,9,11,"data"],[25,17,9,15],[25,20,9,18,"JSON"],[25,24,9,22],[25,25,9,23,"parse"],[25,30,9,28],[25,31,9,29,"data"],[25,35,9,33],[25,36,9,34],[25,39,9,37],[25,40,9,38],[25,41,9,39],[26,4,10,2],[26,5,10,3],[26,6,10,4],[26,13,10,11,"error"],[26,18,10,16],[26,20,10,18],[27,6,11,4,"console"],[27,13,11,11],[27,14,11,12,"error"],[27,19,11,17],[27,20,11,18],[27,44,11,42],[27,46,11,44,"error"],[27,51,11,49],[27,52,11,50],[28,6,12,4],[28,13,12,11],[28,14,12,12],[28,15,12,13],[29,4,13,2],[30,2,14,0],[31,2,16,7],[31,17,16,22,"saveWorkers"],[31,28,16,33,"saveWorkers"],[31,29,16,34,"workers"],[31,36,16,41],[31,38,16,43],[32,4,17,2],[32,8,17,6],[33,6,18,4],[33,12,18,10,"AsyncStorage"],[33,24,18,22],[33,25,18,22,"default"],[33,32,18,22],[33,33,18,23,"setItem"],[33,40,18,30],[33,41,18,31,"WORKERS_KEY"],[33,52,18,42],[33,54,18,44,"JSON"],[33,58,18,48],[33,59,18,49,"stringify"],[33,68,18,58],[33,69,18,59,"workers"],[33,76,18,66],[33,77,18,67],[33,78,18,68],[34,6,19,4],[34,13,19,11],[34,17,19,15],[35,4,20,2],[35,5,20,3],[35,6,20,4],[35,13,20,11,"error"],[35,18,20,16],[35,20,20,18],[36,6,21,4,"console"],[36,13,21,11],[36,14,21,12,"error"],[36,19,21,17],[36,20,21,18],[36,43,21,41],[36,45,21,43,"error"],[36,50,21,48],[36,51,21,49],[37,6,22,4],[37,13,22,11],[37,18,22,16],[38,4,23,2],[39,2,24,0],[40,2,26,7],[40,17,26,22,"updateAttendance"],[40,33,26,38,"updateAttendance"],[40,34,26,39,"workerId"],[40,42,26,47],[40,44,26,49,"dateISO"],[40,51,26,56],[40,53,26,58,"status"],[40,59,26,64],[40,61,26,66],[41,4,27,2],[41,10,27,8,"workers"],[41,17,27,15],[41,20,27,18],[41,26,27,24,"loadWorkers"],[41,37,27,35],[41,38,27,36],[41,39,27,37],[42,4,29,2],[42,8,29,6],[42,9,29,7,"workers"],[42,16,29,14],[42,17,29,15,"workerId"],[42,25,29,23],[42,26,29,24],[42,28,29,26],[43,6,30,4,"workers"],[43,13,30,11],[43,14,30,12,"workerId"],[43,22,30,20],[43,23,30,21],[43,26,30,24],[44,8,30,26,"attendance"],[44,18,30,36],[44,20,30,38],[45,6,30,41],[45,7,30,42],[46,4,31,2],[47,4,33,2],[47,8,33,6],[47,9,33,7,"workers"],[47,16,33,14],[47,17,33,15,"workerId"],[47,25,33,23],[47,26,33,24],[47,27,33,25,"attendance"],[47,37,33,35],[47,39,33,37],[48,6,34,4,"workers"],[48,13,34,11],[48,14,34,12,"workerId"],[48,22,34,20],[48,23,34,21],[48,24,34,22,"attendance"],[48,34,34,32],[48,37,34,35],[48,39,34,37],[49,4,35,2],[51,4,37,2],[52,4,38,2],[52,10,38,8,"existingIndex"],[52,23,38,21],[52,26,38,24,"workers"],[52,33,38,31],[52,34,38,32,"workerId"],[52,42,38,40],[52,43,38,41],[52,44,38,42,"attendance"],[52,54,38,52],[52,55,38,53,"findIndex"],[52,64,38,62],[52,65,38,63,"a"],[52,66,38,64],[52,70,38,68,"a"],[52,71,38,69],[52,72,38,70,"date"],[52,76,38,74],[52,81,38,79,"dateISO"],[52,88,38,86],[52,89,38,87],[53,4,40,2],[53,10,40,8,"record"],[53,16,40,14],[53,19,40,17],[54,6,41,4,"date"],[54,10,41,8],[54,12,41,10,"dateISO"],[54,19,41,17],[55,6,42,4,"status"],[55,12,42,10],[55,14,42,12,"status"],[55,20,42,18],[56,6,43,4,"markedAt"],[56,14,43,12],[56,16,43,14,"Date"],[56,20,43,18],[56,21,43,19,"now"],[56,24,43,22],[56,25,43,23],[57,4,44,2],[57,5,44,3],[58,4,46,2],[58,8,46,6,"existingIndex"],[58,21,46,19],[58,25,46,23],[58,26,46,24],[58,28,46,26],[59,6,47,4,"workers"],[59,13,47,11],[59,14,47,12,"workerId"],[59,22,47,20],[59,23,47,21],[59,24,47,22,"attendance"],[59,34,47,32],[59,35,47,33,"existingIndex"],[59,48,47,46],[59,49,47,47],[59,52,47,50,"record"],[59,58,47,56],[60,4,48,2],[60,5,48,3],[60,11,48,9],[61,6,49,4,"workers"],[61,13,49,11],[61,14,49,12,"workerId"],[61,22,49,20],[61,23,49,21],[61,24,49,22,"attendance"],[61,34,49,32],[61,35,49,33,"push"],[61,39,49,37],[61,40,49,38,"record"],[61,46,49,44],[61,47,49,45],[62,4,50,2],[63,4,52,2],[63,10,52,8,"saveWorkers"],[63,21,52,19],[63,22,52,20,"workers"],[63,29,52,27],[63,30,52,28],[64,4,53,2],[64,11,53,9,"workers"],[64,18,53,16],[64,19,53,17,"workerId"],[64,27,53,25],[64,28,53,26],[65,2,54,0],[66,2,56,7],[66,17,56,22,"updateWorkerHiddenStatus"],[66,41,56,46,"updateWorkerHiddenStatus"],[66,42,56,47,"workerId"],[66,50,56,55],[66,52,56,57,"hidden"],[66,58,56,63],[66,60,56,65],[67,4,57,2],[67,10,57,8,"workers"],[67,17,57,15],[67,20,57,18],[67,26,57,24,"loadWorkers"],[67,37,57,35],[67,38,57,36],[67,39,57,37],[68,4,59,2],[68,8,59,6],[68,9,59,7,"workers"],[68,16,59,14],[68,17,59,15,"workerId"],[68,25,59,23],[68,26,59,24],[68,28,59,26],[69,6,60,4,"workers"],[69,13,60,11],[69,14,60,12,"workerId"],[69,22,60,20],[69,23,60,21],[69,26,60,24],[69,27,60,25],[69,28,60,26],[70,4,61,2],[71,4,63,2,"workers"],[71,11,63,9],[71,12,63,10,"workerId"],[71,20,63,18],[71,21,63,19],[71,22,63,20,"hidden"],[71,28,63,26],[71,31,63,29,"hidden"],[71,37,63,35],[72,4,64,2],[72,10,64,8,"saveWorkers"],[72,21,64,19],[72,22,64,20,"workers"],[72,29,64,27],[72,30,64,28],[73,4,65,2],[73,11,65,9,"workers"],[73,18,65,16],[73,19,65,17,"workerId"],[73,27,65,25],[73,28,65,26],[74,2,66,0],[75,2,68,7],[75,11,68,16,"isExpired"],[75,20,68,25,"isExpired"],[75,21,68,26,"markedAt"],[75,29,68,34],[75,31,68,36],[76,4,69,2],[76,8,69,6],[76,9,69,7,"markedAt"],[76,17,69,15],[76,19,69,17],[76,26,69,24],[76,31,69,29],[77,4,70,2],[77,10,70,8,"now"],[77,13,70,11],[77,16,70,14,"Date"],[77,20,70,18],[77,21,70,19,"now"],[77,24,70,22],[77,25,70,23],[77,26,70,24],[78,4,71,2],[78,10,71,8,"elapsed"],[78,17,71,15],[78,20,71,18,"now"],[78,23,71,21],[78,26,71,24,"markedAt"],[78,34,71,32],[79,4,72,2],[79,10,72,8,"twentyFourHours"],[79,25,72,23],[79,28,72,26],[79,30,72,28],[79,33,72,31],[79,35,72,33],[79,38,72,36],[79,40,72,38],[79,43,72,41],[79,47,72,45],[80,4,73,2],[80,11,73,9,"elapsed"],[80,18,73,16],[80,21,73,19,"twentyFourHours"],[80,36,73,34],[81,2,74,0],[82,0,74,1],[82,3]],"functionMap":{"names":["<global>","loadWorkers","saveWorkers","updateAttendance","workers.workerId.attendance.findIndex$argument_0","updateWorkerHiddenStatus","isExpired"],"mappings":"AAA;OCK;CDQ;OEE;CFQ;OGE;+DCY,uBD;CHgB;OKE;CLU;OME;CNM"},"hasCjsExports":false},"type":"js/module"}]}